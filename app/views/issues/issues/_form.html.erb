<% milestones = Issues::Milestone.where(:project_id => project.id).sorted %>
<% priorities = Issues::Issue::PRIORITIES.to_a.map(&:reverse) %>

<%= gts_form_for([project, issue]) do |f| %>
  <div class="row-fluid">
    <div class="span8">
      <%= f.input :title, :placeholder => 'Title', :label => false, :input_html => { :class => 'input-expanded' } %>
      <%= f.input :description, :placeholder => 'Description', :label => false %>
    </div>
    <div class="span4">
      <div class="well gts-well-lite gts-issue-sidebar-fields">
        <%= f.input :state, :collection => %w(new open resolved invalid), :default => 'new' %>
        <%= f.input :priority, :collection => priorities, :default => 1, :required => false %>
        <%= f.input :milestone_id, :collection => milestones %>
        <hr/>
        <%= render 'issues/issues/form/assignee_widget', :issue => issue, :f => f %>
        <hr/>
        <%= render 'issues/issues/form/label_widget', :issue => issue, :f => f %>
      </div>
    </div>
  </div>
  <%= f.actions do %>
    <%= f.submit_button %>
  <% end %>
<% end %>
